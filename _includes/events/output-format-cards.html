<div class="cardTK" style="background-color:#f2f2f2;margin-bottom:2em;border:1px solid #ddd;width:100%;padding:2em;">

  <div class="card-header">
    {% if book_category_title %}
      <div class="book_category_title">{{ book_category_title }}</div>
    {% endif %}
    {% if program_title %}
      <div class="program_title">{{ program_title }}</div>
    {% endif %}
    {% if event.venue %}
      <div class="event.venue">
        {{ event.venue }}
      </div>
    {% endif %}
  </div>

  <div class="card-image">
    {% comment %}
      looking for events with books. using the book_isbn value
      Using "...size > 0" to capture null values and entries where no field is present
      size, oddly, returns "8" where there is only one isbn (which is 13 digits)
    {% endcomment %}
    {% if related_books_isbn.size > 0 %}
      {% comment %}  {% endcomment %}
      {% for isbn in related_books_isbn %}
        {% if isbn %}
          {% assign related_books = site.books | where: 'isbn', isbn %}
          {% for book in related_books %}
            {% if book.image_path %}
               <img src="{{ book.image_path }}" alt="{{ book.title }}" style="width:auto;height:100%;" />
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    {% endif %}
  </div>

  <div class="card-header">
    {% if start_at %}
      <span class="date">{{ start_at }}</span>
    {% endif %}
    {% if event.title  %}
      <div class="event_title">
        {{ event_title }}
      </div>
    {% endif %}
  </div>

  <div class="card-copy">
    {% if event.content %}
      {{ event.content | markdownify }}
    {% endif %}
  </div>

  <div class="card-footer">
    <div class="addthis_sharing_toolbox addthis_default_style "{% if start_at %}addthis:url="{{ site.url }}/events/#event-{{ start_at }}"{% endif %}{% if event.title %} addthis:title="{{ event.title }}"{% endif %}>
    </div>
  </div>

  </div>